<body>
  <main>
    <!-- Barra de contexto para compartir datos -->
    <div class="card" style="margin-bottom: 1rem; padding: 1rem;">
      <strong>Contexto</strong>
      <div style="display: grid; gap: .5rem; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); margin-top: .5rem;">
        <label>ID Activo
          <input data-bind="assetId" placeholder="HILUX-A8-001" 
                 oninput="AURUM.set('assetId', this.value)">
        </label>
        <label>Nombre
          <input data-bind="assetName" placeholder="Toyota Hilux" 
                 oninput="AURUM.set('assetName', this.value)">
        </label>
        <label>Operador
          <input data-bind="operator" placeholder="Andrés Bello" 
                 oninput="AURUM.set('operator', this.value)">
        </label>
      </div>

      <div style="margin-top: .75rem; display: flex; gap: .5rem; flex-wrap: wrap;">
        <a href="checklist.html" class="btn" data-link>Checklist 3D</a>
        <a href="trazabilidad.html" class="btn" data-link>Trazabilidad</a>
        <a href="numerologia.html" class="btn" data-link>Numerología</a>
        <a href="hilux.html" class="btn" data-link>Hilux 3D</a>
      </div>
    </div>

    <!-- Formulario de trazabilidad -->
    <div class="card">
      <h2>Trazabilidad de Activo / Intervención</h2>
      <form data-save>
        <div class="field">
          <label>ID Activo (QR / Código interno)</label>
          <input type="text" name="assetId" data-bind="assetId" placeholder="Ej: HILUX-A8-001">
        </div>

        <div class="field">
          <label>Nombre / Descripción</label>
          <input type="text" name="assetName" data-bind="assetName" placeholder="Toyota Hilux – Check 50 pts / Intervención">
        </div>

        <div class="field">
          <label>Estado</label>
          <select name="status">
            <option>Pendiente</option>
            <option>En Proceso</option>
            <option>Finalizado</option>
          </select>
        </div>

        <div class="field">
          <label>Ubicación (GPS)</label>
          <button type="button" onclick="getLocation()">Obtener ubicación</button>
          <p>Lat: <span id="lat">—</span>, Lng: <span id="lng">—</span></p>
        </div>

        <div class="field">
          <label>Adjuntar evidencia (imágenes, PDFs)</label>
          <input type="file" name="evidence" multiple>
        </div>

        <button type="submit">Guardar Registro</button>
      </form>
    </div>
  </main>

  <!-- Script de conexión -->
  <script src="aurum.js"></script>
  <script>
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(pos) {
          document.getElementById("lat").textContent = pos.coords.latitude.toFixed(6);
          document.getElementById("lng").textContent = pos.coords.longitude.toFixed(6);
        });
      } else {
        alert("La geolocalización no está soportada en este navegador.");
      }
    }
  </script>
</body>