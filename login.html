<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AURUM∞ · Acceso</title>
<style>
  :root{
    --bg:#070b1a; --ink:#e7f0ff; --muted:#a7b3cc;
    --accent1:#7FE9D3; --accent2:#B896FF; --accent3:#00E3FF;
  }
  html,body{height:100%;margin:0}
  body{
    display:grid;place-items:center;background:radial-gradient(1200px 800px at 10% 10%, #0d1431 0%, #070b1a 40%, #04060e 100%);
    color:var(--ink); font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;
  }
  .card{
    width:min(430px,92vw); border:1px solid #1a2342; border-radius:16px; padding:28px 24px;
    background:linear-gradient(180deg, rgba(19,26,55,.7), rgba(9,14,30,.6));
    box-shadow:0 6px 30px rgba(0,0,0,.35);
  }
  h1{margin:0 0 6px; font-weight:700; letter-spacing:.5px}
  .sub{color:var(--muted); font-size:.95rem; margin-bottom:18px}
  label{display:block; font-size:.9rem; margin:.6rem 0 .25rem; color:#cfe0ff}
  input,select{
    width:100%; background:rgba(255,255,255,.06); color:var(--ink);
    border:1px solid #27345d; border-radius:12px; padding:12px 14px; outline:none;
  }
  input:focus{border-color:#3c55a8; box-shadow:0 0 0 3px rgba(60,85,168,.25)}
  .row{display:flex; gap:10px}
  .btn{
    margin-top:16px; width:100%; padding:12px 14px; border:0; border-radius:12px;
    color:#0b0f1d; font-weight:700; cursor:pointer;
    background:linear-gradient(90deg, var(--accent1), var(--accent3), var(--accent2));
    background-size:200% 100%; transition:background-position .4s ease, transform .05s ease;
  }
  .btn:active{transform:translateY(1px)}
  .hint{margin-top:14px; color:var(--muted); font-size:.85rem; line-height:1.4}
  .pill{display:inline-block; padding:2px 8px; border:1px solid #30406f; border-radius:999px; font-size:.78rem; color:#cdd9ff}
  .err{margin-top:10px; color:#ff9fa3; min-height:1.2em}
  .brand{display:flex; align-items:center; gap:10px; margin-bottom:10px}
  .logo{
    width:36px; height:36px; border-radius:50%;
    background:conic-gradient(from 0deg, var(--accent1), var(--accent3), var(--accent2), var(--accent1));
    filter:saturate(120%); box-shadow:0 0 12px rgba(0,227,255,.4) inset, 0 0 18px rgba(127,233,211,.25);
  }
  .links{margin-top:14px; display:flex; justify-content:space-between; font-size:.88rem}
  a{color:#8fd3ff; text-decoration:none}
  a:hover{text-decoration:underline}
</style>
</head>
<body>
  <div class="card">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <h1>AURUM∞</h1>
        <div class="sub">Acceso seguro · Estándar Lemuriano</div>
      </div>
    </div>

    <!-- FORMULARIO -->
    <form id="formLogin">
      <label for="email">Correo</label>
      <input id="email" name="email" type="email" placeholder="usuario@empresa.cl" required />

      <label for="pass">Clave</label>
      <input id="pass" name="pass" type="password" placeholder="••••••••" required />

      <div class="row">
        <div style="flex:1">
          <label for="rol">Rol</label>
          <select id="rol" name="rol">
            <option value="admin">Administrador</option>
            <option value="supervisor">Supervisor</option>
            <option value="operador">Operador</option>
            <option value="invitado">Invitado</option>
          </select>
        </div>
        <div style="display:flex;align-items:end">
          <span class="pill">v1 · local</span>
        </div>
      </div>

      <button class="btn" type="submit">Ingresar</button>
      <div id="err" class="err"></div>
      <div class="hint">
        Tip: puedes usar cualquiera de estos usuarios demo (la clave es <b>aurum8</b>):
        <br>admin@aurum8.cl · supervisor@aurum8.cl · operador@aurum8.cl · invitado@aurum8.cl
      </div>

      <div class="links">
        <a href="/index.html">← Volver al sitio</a>
        <a href="#" id="verPoliticas">Políticas</a>
      </div>
    </form>
  </div>

<script>
/* ===== Demo de usuarios (puedes reemplazar por tu backend más adelante) ===== */
const USERS = [
  { email:"admin@aurum8.cl",      role:"admin",      name:"Administrador AURUM", pass:"aurum8" },
  { email:"supervisor@aurum8.cl", role:"supervisor", name:"Supervisor Mina",     pass:"aurum8" },
  { email:"operador@aurum8.cl",   role:"operador",   name:"Operador Planta",     pass:"aurum8" },
  { email:"invitado@aurum8.cl",   role:"invitado",   name:"Invitado",            pass:"aurum8" },
];

/* ===== Login + sesión en localStorage ===== */
const errEl = document.getElementById("err");
document.getElementById("formLogin").addEventListener("submit", (e)=>{
  e.preventDefault();
  errEl.textContent = "";

  const email = (document.getElementById("email").value || "").trim().toLowerCase();
  const pass  = (document.getElementById("pass").value  || "").trim();
  const rol   = document.getElementById("rol").value;

  const u = USERS.find(x => x.email===email && x.pass===pass);
  if(!u){ errEl.textContent = "Correo o clave incorrectos."; return; }
  if(u.role !== rol){
    errEl.textContent = "El rol seleccionado no coincide con el usuario.";
    return;
  }

  // Session payload
  const session = {
    email: u.email,
    name: u.name,
    role: u.role,
    ts: Date.now(),
    exp: Date.now() + (12*60*60*1000) // 12 horas
  };
  localStorage.setItem("aurum_session", JSON.stringify(session));

  // Redirección según rol
  const redirectMap = {
    admin: "/modulos.html",
    supervisor: "/ot.html",
    operador: "/checklist.html",
    invitado: "/index.html"
  };
  const url = redirectMap[u.role] || "/index.html";
  window.location.href = url;
});

/* ===== Info legal simple ===== */
document.getElementById("verPoliticas").addEventListener("click", (e)=>{
  e.preventDefault();
  alert("Políticas AURUM∞: El acceso queda registrado localmente por 12 horas. No compartas tu clave. Para integración con backend/SSO, esta vista puede conectarse vía API segura cuando esté disponible.");
});
</script>
</body>
</html>