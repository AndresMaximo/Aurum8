<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hilux 3D ‚Ä¢ AURUM‚àû</title>

  <!-- Estilos base del proyecto + tema Lemuriano -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="lemuria.css">

  <!-- Visor 3D -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body class="lemuria">
  <header class="top">
    <h1>AURUM‚àû</h1>
    <nav>
      <a href="index.html">Inicio</a>
      <a href="modulos.html" class="active">M√≥dulos</a>
      <a href="contacto.html">Contacto</a>
    </nav>
  </header>

  <main class="container">
    <h2>Checklist T√©cnico 3D ‚Äî Toyota Hilux</h2>
    <p class="lead">Toca los nodos para ver cada √≠tem. Est√©tica Lemuriana activada üåä‚ú®.</p>

    <section class="viewer-wrap">
      <!-- ‚ö†Ô∏è Reemplaza src con la ruta real del modelo -->
      <model-viewer id="viewer"
        src="assets/hilux.glb"
        camera-controls
        touch-action="pan-y"
        shadow-intensity="1"
        exposure="0.9"
        ar ar-modes="webxr scene-viewer quick-look"
        environment-image="neutral"
        skybox-color="#06141A"
        poster=""
        style="background:transparent">

        <!-- Hotspots de ejemplo (puedes dejar estos 3 y el script a√±ade el resto) -->
        <button class="hotspot" slot="hotspot-1" data-item="filtro-aire"
                data-position="0.25m 1.35m 0.6m" data-normal="0m 1m 0m"
                aria-label="Filtro de aire"></button>

        <button class="hotspot" slot="hotspot-2" data-item="neumatico-del-izq"
                data-position="0.85m 0.45m 0.95m" data-normal="0m 1m 0m"
                aria-label="Neum√°tico Del. Izq."></button>

        <button class="hotspot" slot="hotspot-3" data-item="aceite-motor"
                data-position="0.15m 1.25m 0.4m" data-normal="0m 1m 0m"
                aria-label="Aceite Motor"></button>
      </model-viewer>
    </section>

    <aside class="panel" id="panel">
      <div class="panel-head">
        <h3 id="p-title">Selecciona un punto</h3>
        <span id="p-status" class="badge neutral">‚Äî</span>
      </div>

      <dl class="kv">
        <dt>√öltima revisi√≥n</dt><dd id="p-date">‚Äî</dd>
        <dt>Observaciones</dt><dd id="p-notes">‚Äî</dd>
        <dt>Foto</dt>
        <dd><input type="file" id="p-photo" accept="image/*"></dd>
      </dl>

      <div class="panel-actions">
        <button id="btn-ok" class="btn success">Aprobado</button>
        <button id="btn-att" class="btn warning">Observaci√≥n</button>
        <button id="btn-fail" class="btn danger">Rechazado</button>
        <a class="btn ghost" href="checklist.html">Generar checklist</a>
      </div>
    </aside>

    <section class="summary">
      <div class="chip"><span id="cnt-total">0</span> √çtems</div>
      <div class="chip ok"><span id="cnt-ok">0</span> Aprobados</div>
      <div class="chip att"><span id="cnt-att">0</span> Con obs.</div>
      <div class="chip fail"><span id="cnt-fail">0</span> Rechazados</div>
    </section>
  </main>

  <footer class="foot">¬© AURUM8</footer>

  <script>
    // -------- Datos (puedes extender a 50 √≠tems) ----------
    const items = {
      "filtro-aire": {
        titulo: "Filtro de aire",
        fecha: "06/07/2025",
        notas: "Energenl√° en balance",
        estado: "ok"
      },
      "neumatico-del-izq": {
        titulo: "Neum√°tico Delantero Izquierdo",
        fecha: "06/07/2025",
        notas: "Presi√≥n 33 PSI",
        estado: "ok"
      },
      "aceite-motor": {
        titulo: "Aceite de Motor",
        fecha: "06/07/2025",
        notas: "Nivel correcto",
        estado: "ok"
      }
      // üëâ Agrega aqu√≠ el resto hasta 50 con clave √∫nica
    };

    // -------- UI/Estado ----------
    const $ = sel => document.querySelector(sel);
    const panel = $("#panel");
    const pTitle = $("#p-title"), pStatus = $("#p-status"),
          pDate = $("#p-date"), pNotes = $("#p-notes");
    const cntOk = $("#cnt-ok"), cntAtt = $("#cnt-att"),
          cntFail = $("#cnt-fail"), cntTotal = $("#cnt-total");

    function refreshCounters(){
      const vals = Object.values(items);
      cntTotal.textContent = vals.length;
      cntOk.textContent    = vals.filter(i=>i.estado==="ok").length;
      cntAtt.textContent   = vals.filter(i=>i.estado==="att").length;
      cntFail.textContent  = vals.filter(i=>i.estado==="fail").length;
    }

    function setBadge(el, state){
      el.className = "badge " + (state||"neutral");
      el.textContent = state==="ok" ? "Aprobado"
                     : state==="att"? "Observaci√≥n"
                     : state==="fail"?"Rechazado" : "‚Äî";
    }

    function loadItem(id){
      const it = items[id];
      if(!it) return;
      panel.dataset.id = id;
      pTitle.textContent = it.titulo;
      pDate.textContent = it.fecha || "‚Äî";
      pNotes.textContent = it.notas || "‚Äî";
      setBadge(pStatus, it.estado);
    }

    // Hotspots -> seleccionar
    document.querySelectorAll(".hotspot").forEach(btn=>{
      btn.addEventListener("click", ()=> loadItem(btn.dataset.item));
    });

    // Acciones
    $("#btn-ok").onclick   = ()=> updateState("ok");
    $("#btn-att").onclick  = ()=> updateState("att");
    $("#btn-fail").onclick = ()=> updateState("fail");

    function updateState(state){
      const id = panel.dataset.id;
      if(!id) return;
      items[id].estado = state;
      setBadge(pStatus, state);
      refreshCounters();
    }

    // Init
    refreshCounters();
  </script>
</body>
</html>