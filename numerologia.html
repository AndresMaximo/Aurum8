<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AURUM∞ · Numerología Vibracional</title>
<style>
  :root{
    --bg1:#0a0f1a; --bg2:#121a2b; --iris:#8ad9ff; --aqua:#39f1c5; --gold:#ffe083;
    --violet:#b99cff; --rose:#ff9ad6; --text:#ecf3ff; --muted:#9fb0c9;
    --card:#0f1524cc; --card2:#0d1220e6; --ok:#38d39f; --warn:#ffd36b;
  }
  /* Lemurian backdrop */
  body{
    margin:0; color:var(--text); background: radial-gradient(1200px 800px at 20% 10%, #1b2847 0%, var(--bg2) 40%, var(--bg1) 85%);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Inter, "Noto Sans", "Liberation Sans", Arial, "Apple Color Emoji","Noto Color Emoji";
    background-attachment: fixed;
  }
  .stars, .nebula{position:fixed; inset:0; pointer-events:none; z-index:-1}
  .stars{background-image:radial-gradient(2px 2px at 10% 20%,#ffffff66 30%,transparent 31%),
                           radial-gradient(1.5px 1.5px at 70% 30%,#ffffff55 30%,transparent 31%),
                           radial-gradient(1.5px 1.5px at 30% 70%,#ffffff55 30%,transparent 31%),
                           radial-gradient(1px 1px at 80% 80%,#ffffff33 30%,transparent 31%)}
  .nebula{background:
     radial-gradient(600px 400px at 75% 20%, #7ef7ff12, transparent 60%),
     radial-gradient(500px 350px at 20% 80%, #a47bff14, transparent 60%),
     radial-gradient(350px 250px at 50% 50%, #ffb3e614, transparent 60%);
  }
  header{
    position:sticky; top:0; z-index:5; backdrop-filter: blur(8px);
    background: linear-gradient(180deg, #0b1020ee, #0b1020cc 60%, transparent);
    border-bottom:1px solid #ffffff12;
  }
  .container{max-width:1100px; margin:0 auto; padding:20px 16px;}
  .brand{display:flex; align-items:center; gap:12px}
  .brand .sigil{
    width:40px; height:40px; border-radius:50%;
    background: conic-gradient(from 220deg, var(--aqua), var(--violet), var(--rose), var(--aqua));
    box-shadow: 0 0 20px #8ad9ff55, inset 0 0 18px #ffffff22;
    display:grid; place-items:center; color:#001923; font-weight:800;
  }
  .brand h1{font-size:20px; margin:0; letter-spacing:0.08em}
  nav a{color:var(--muted); text-decoration:none; margin-right:16px}
  nav a:hover{color:var(--aqua)}
  .grid{display:grid; gap:18px; grid-template-columns: 1fr}
  @media(min-width:900px){ .grid{grid-template-columns: 1.2fr 1fr} }

  .card{
    background: linear-gradient(180deg, var(--card), var(--card2));
    border:1px solid #ffffff1a; border-radius:16px; padding:18px;
    box-shadow: 0 10px 30px #0008, inset 0 1px 0 #fff1;
  }
  h2{margin:0 0 10px 0; font-size:20px; letter-spacing:.06em}
  .sub{color:var(--muted); font-size:13px; margin-bottom:12px}
  label{font-size:13px; color:var(--muted)}
  .row{display:grid; gap:12px; grid-template-columns: 1fr}
  @media(min-width:680px){ .row{grid-template-columns: 1fr 1fr 1fr} }
  input, select, button, textarea{
    width:100%; padding:12px 12px; border-radius:12px; border:1px solid #ffffff22;
    background:#0d1322; color:var(--text); outline:none;
  }
  input:focus, textarea:focus{border-color:#7ef7ff55; box-shadow:0 0 0 3px #39f1c51f}
  .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
  .btn{cursor:pointer; border:1px solid #39f1c544; background:linear-gradient(180deg,#1a2742,#121b34); }
  .btn.primary{background:linear-gradient(180deg,#1b3344,#10263b); border-color:#39f1c588}
  .btn.gold{border-color:#ffd36b66; background:linear-gradient(180deg,#3a2b14,#231b0d)}
  .kpi{
    display:grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap:10px; margin-top:10px;
  }
  .pill{
    border:1px solid #ffffff1f; border-radius:12px; padding:10px 12px; background:#0b1222;
  }
  .pill b{color:var(--gold)}
  .section{margin-top:14px; border-top:1px dashed #ffffff22; padding-top:12px}
  .tag{display:inline-block; padding:2px 10px; border-radius:999px; font-size:12px; border:1px solid #ffffff22; color:#cfe9ff; margin-right:6px}
  .ok{color:var(--ok)} .warn{color:var(--warn)}
  details{border:1px dashed #ffffff26; border-radius:12px; padding:10px 12px; background:#0b1222; margin-top:8px}
  summary{cursor:pointer; color:#bfeaff}
  .footer-note{color:#94a7c5; font-size:12px; margin-top:12px}
  /* Print */
  @media print{
    header, .actions{display:none !important}
    body{background:#fff; color:#111}
    .card{box-shadow:none; border:1px solid #ccc; background:#fff}
    .stars,.nebula{display:none}
  }
</style>
</head>
<body>
<div class="stars"></div><div class="nebula"></div>
<header>
  <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:16px;">
    <div class="brand">
      <div class="sigil">∞</div>
      <h1>AURUM∞ · Numerología Vibracional</h1>
    </div>
    <nav>
      <a href="/index.html">Inicio</a>
      <a href="/modulos.html">Módulos</a>
      <a href="/vision.html">Visión</a>
      <a href="/contacto.html">Contacto</a>
    </nav>
  </div>
</header>

<main class="container grid">
  <!-- Entrada -->
  <section class="card">
    <h2>Datos del consultante</h2>
    <div class="sub">Completa y pulsa <b>Calcular</b>. Puedes elegir la fecha para la vibración del día (por defecto, hoy).</div>
    <div class="row">
      <div>
        <label>Nombre completo (tal como figura en documento)</label>
        <input id="nombre" placeholder="Ej: Alexi Esteban Troncoso Carmona" />
      </div>
      <div>
        <label>Fecha de nacimiento</label>
        <input id="nacimiento" type="date" />
      </div>
      <div>
        <label>Fecha a analizar (para la vibración del día)</label>
        <input id="fechaAnalisis" type="date" />
      </div>
    </div>
    <div style="margin-top:10px">
      <label style="display:flex; align-items:center; gap:8px">
        <input id="contarYvocal" type="checkbox" checked />
        Considerar la “Y” como vocal (recomendado en español)
      </label>
    </div>
    <div class="actions">
      <button class="btn primary" onclick="calcular()">Calcular</button>
      <button class="btn" onclick="limpiar()">Limpiar</button>
      <button class="btn gold" onclick="window.print()">Generar PDF</button>
    </div>
    <div class="footer-note">Nota: Los <b>números maestros</b> 11/22/33 se preservan cuando aparecen naturalmente; en ciclos personales se reduce a 1–9.</div>
  </section>

  <!-- Salida -->
  <section class="card" id="panelResultados" style="display:none">
    <h2>Resumen numérico</h2>
    <div class="kpi">
      <div class="pill">Camino de Vida: <b id="k1"></b></div>
      <div class="pill">Destino (Nombre): <b id="k2"></b></div>
      <div class="pill">Alma (Vocales): <b id="k3"></b></div>
      <div class="pill">Personalidad (Consonantes): <b id="k4"></b></div>
      <div class="pill">Año Personal: <b id="k5"></b></div>
      <div class="pill">Mes Personal: <b id="k6"></b></div>
      <div class="pill">Día Personal: <b id="k7"></b></div>
    </div>

    <div class="section">
      <span class="tag">Interpretación Global</span>
      <div id="global"></div>
    </div>

    <div class="section">
      <span class="tag">Vibración del día</span>
      <div id="vibe"></div>
    </div>
  </section>

  <!-- Fichas por número -->
  <section class="card" id="panelFichas" style="display:none">
    <h2>Fichas profundas</h2>
    <div class="sub">Pulsa para abrir la interpretación detallada de cada número relevante en tu perfil.</div>
    <div id="fichas"></div>
  </section>
</main>

<script>
/* Utilidades numerológicas */
const mapa = {
  A:1,J:1,S:1, B:2,K:2,T:2, C:3,L:3,U:3, D:4,M:4,V:4, E:5,N:5,W:5,
  F:6,O:6,X:6, G:7,P:7,Y:7, H:8,Q:8,Z:8, I:9,R:9
};
const VOWELS = new Set(['A','E','I','O','U','Y']); // Y como vocal (toggle más abajo)

function sumDigits(n){ return n.toString().split('').reduce((a,b)=>a + (+b),0); }
function reduceNumber(n, preserveMasters=true){
  // Mantener 11/22/33 sólo en primeras reducciones
  while(n>9){
    if(preserveMasters && (n===11 || n===22 || n===33)) return n;
    n = sumDigits(n);
  }
  return n;
}
function dateToDMY(d){
  return { d: d.getDate(), m: d.getMonth()+1, y: d.getFullYear() };
}
function parseISO(value){
  // Evita desajustes de zona creando como UTC
  const parts = value.split('-').map(Number);
  // yyyy-mm-dd
  return new Date(parts[0], parts[1]-1, parts[2]);
}
function calcCaminoVida(d){
  const {d:dd, m, y} = dateToDMY(d);
  return reduceNumber(sumDigits(dd)+sumDigits(m)+sumDigits(y), true);
}
function nameToNumbers(nombre, contarYcomoVocal){
  const letters = nombre.toUpperCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^A-ZÁÉÍÓÚÜÑ ]/g,'');
  let total=0, vocales=0, conson=0;
  for(const ch of letters){
    if(ch===' ') continue;
    const base = mapa[ch] || 0;
    total += base;
    const esVocal = (ch==='Y') ? contarYcomoVocal : VOWELS.has(ch);
    if(esVocal) vocales += base; else conson += base;
  }
  return {
    destino: reduceNumber(total, true),
    alma: reduceNumber(vocales, true),
    personalidad: reduceNumber(conson, true)
  };
}
function personalYear(dob, target){
  const b = dateToDMY(dob);
  const t = dateToDMY(target);
  const n = sumDigits(b.d) + sumDigits(b.m) + sumDigits(t.y);
  return reduceNumber(n, false);
}
function personalMonth(yr, target){
  return reduceNumber(yr + (dateToDMY(target).m), false);
}
function personalDay(mo, target){
  return reduceNumber(mo + (dateToDMY(target).d), false);
}

/* Textos de interpretación */
const FICHAS = {
  1:{titulo:"1 · Voluntad / Inicio",
     luz:"Liderazgo, autonomía, dirección clara, capacidad para arrancar proyectos y abrir camino.",
     sombra:"Impaciencia, egocentrismo, aislamiento, dificultad para pedir ayuda.",
     integracion:"Practica liderazgo servicial: decide, pero escucha y delega. Canaliza tu fuego en metas concretas y medibles."},
  2:{titulo:"2 · Cooperación / Sensibilidad",
     luz:"Diplomacia, trabajo en equipo, intuición relacional, escucha profunda.",
     sombra:"Dependencia, indecisión, evitar el conflicto a toda costa.",
     integracion:"Pon límites amorosos y decide en tiempos finitos. La sensibilidad es un talento cuando no te disuelves en el otro."},
  3:{titulo:"3 · Expresión / Creatividad",
     luz:"Comunicación, carisma, alegría, arte y narrativa.",
     sombra:"Dispersión, procrastinación estética, dramatización.",
     integracion:"Ritualiza tu creatividad: bloques de tiempo y entregables. Menos es más; publica, no persigas “perfecto”."},
  4:{titulo:"4 · Orden / Construcción",
     luz:"Disciplina, método, ingeniería, confiabilidad.",
     sombra:"Rigidez, miedo al cambio, exceso de control.",
     integracion:"Estructura con márgenes de flexibilidad. Itera en sprints: planifica, ejecuta, mide, ajusta."},
  5:{titulo:"5 · Cambio / Movimiento",
     luz:"Adaptabilidad, exploración, aprendizaje veloz.",
     sombra:"Inquietud crónica, dispersión hedonista, miedo al compromiso.",
     integracion:"Explora con foco: 1 cambio transformador cada vez. Diseña reglas de juego antes de saltar."},
  6:{titulo:"6 · Cuidado / Responsabilidad",
     luz:"Servicio, armonía, estética de lo útil, liderazgo cuidador.",
     sombra:"Autoexigencia, sobrecarga, martirio silencioso.",
     integracion:"Cuida sin salvar. Agenda cuidado propio como tarea crítica del proyecto."},
  7:{titulo:"7 · Insight / Maestro interior",
     luz:"Análisis profundo, espiritualidad experiencial, investigación.",
     sombra:"Aislamiento, exceso de duda, intelectualización.",
     integracion:"Baja la sabiduría al cuerpo: prototipa, testea, comparte aprendizajes."},
  8:{titulo:"8 · Poder / Gestión",
     luz:"Ejecución, recursos, negociación, visión material.",
     sombra:"Control por miedo, rigidez, trabajar sin alma.",
     integracion:"Alínea propósito y métricas. Poder como capacidad de crear valor distribuido."},
  9:{titulo:"9 · Trascendencia / Servicio al colectivo",
     luz:"Humanitarismo, cierre de ciclos, arte sanador.",
     sombra:"Idealismo dolorido, no soltar, culpas.",
     integracion:"Cierra con ritual y gratitud. Enfoca compasión con límites claros."},
  11:{titulo:"11 · Maestría Intuitiva",
     luz:"Visión, inspiración, canal creativo-espiritual.",
     sombra:"Nerviosismo, exceso de expectativas, dispersión energética.",
     integracion:"Enraíza la visión en rutinas. Traduce intuición en prototipos y acuerdos."},
  22:{titulo:"22 · Arquitecto del Propósito",
     luz:"Materializar lo imposible, liderazgo sistémico, impacto a escala.",
     sombra:"Perfeccionismo paralizante, temor a la grandeza propia.",
     integracion:"Divide visión en ladrillos semanales. Mentoreo y equipos como columna vertebral."},
  33:{titulo:"33 · Servicio Compasivo",
     luz:"Amor que organiza, pedagogía sanadora, arte al servicio.",
     sombra:"Autosacrificio, pérdida de límites, agotamiento.",
     integracion:"Amor con estructura: agenda límites, descanso y co-responsabilidad."}
};

function glosaNumero(n){
  const f = FICHAS[n] || FICHAS[reduceNumber(n,false)];
  return `<b>${f.titulo}</b> — ${f.luz}`;
}

/* Interpretación global sencilla combinando Camino+Destino+Alma+Personalidad */
function interpretacionGlobal(k){
  const piezas = [];
  piezas.push(`Tu <b>Camino de Vida</b> ${glosaNumero(k.camino)}. Marca el aprendizaje que tu alma vino a cultivar.`);
  piezas.push(`Tu <b>Destino</b> (nombre) ${glosaNumero(k.destino)}. Es la firma social: cómo te perciben y a qué te invitan.`);
  piezas.push(`Tu <b>Deseo del Alma</b> ${glosaNumero(k.alma)}. Lo que te nutre en lo íntimo y te recarga.`);
  piezas.push(`Tu <b>Personalidad</b> ${glosaNumero(k.personalidad)}. Tu modo natural de interactuar y protegerte.`);
  // Coherencias y tensiones básicas
  const afin = (a,b)=> a===b || reduceNumber(a,false)===reduceNumber(b,false);
  const matches = [];
  if(afin(k.camino,k.destino)) matches.push("camino y destino alineados");
  if(afin(k.alma,k.personalidad)) matches.push("alma y personalidad dialogan en el mismo tono");
  const wrap = matches.length ? `Se observan coherencias: <span class="ok">${matches.join(" · ")}</span>.` : `Hay aprendizajes en integrar las distintas voces internas (no es conflicto, es polifonía).`;
  return piezas.join("<br>") + "<br><br>" + wrap;
}

/* Vibración del día */
function vibracionDelDia(diaPersonal){
  const mapa = {
    1:{clave:"Inicios", msg:"Hoy abre una puerta. Un primer paso claro vale más que diez ideas.", acts:["Define 1 objetivo y 1 tarea crítica","Evita consultar en exceso, confía en tu pulso","Cuida tu tono al liderar: firme y empático"]},
    2:{clave:"Alianzas", msg:"Día de puentes. La cooperación reduce fricción y acelera el avance.", acts:["Agenda una conversación difícil","Pide y ofrece feedback específico","Evita decidir en soledad asuntos complejos"]},
    3:{clave:"Expresión", msg:"Comunica y crea. Lo que no expresas se estanca.", acts:["Escribe un anuncio / presentación","Publica un avance imperfecto","Reserva 30’ para creatividad libre"]},
    4:{clave:"Estructura", msg:"Ordena, documenta y cierra pendientes.", acts:["Define procesos mínimos viables","Bloquea tiempo profundo sin interrupciones","Evita sobreplanificar: deja márgenes"]},
    5:{clave:"Cambio", msg:"Itera y adapta. Explora sin perder el foco.", acts:["Prueba una mejora o herramienta","Rotar tareas para aprender","Evita comprometerte con 3 cambios a la vez"]},
    6:{clave:"Cuidado", msg:"Armoniza equipos y entorno. El detalle importa.", acts:["Revisa calidad/seguridad","Acompaña a alguien clave","Evita hacerte cargo de todo: reparte"]},
    7:{clave:"Insight", msg:"Profundiza y afina criterio. Silencio productivo.", acts:["Analiza datos/indicadores","Diseña un experimento","Evita sobrepensar: decide al final del bloque"]},
    8:{clave:"Ejecución", msg:"Negocia, gestiona recursos, impulsa resultados.", acts:["Cierra acuerdos","Monitorea KPIs y costos","Evita controlar por ansiedad: confía en el proceso"]},
    9:{clave:"Cierre", msg:"Entrega, agradece y suelta. Comparte impacto.", acts:["Cierra 1 ciclo con acta","Reconoce al equipo","Evita iniciar algo grande hoy"]}
  };
  const v = mapa[diaPersonal] || mapa[reduceNumber(diaPersonal,false)];
  return `
    <div style="margin:6px 0 8px 0"><b>Clave:</b> ${v.clave}</div>
    <div style="margin-bottom:8px">${v.msg}</div>
    <div><b>Acciones recomendadas:</b>
      <ul style="margin:6px 0 0 18px">
        ${v.acts.map(a=>`<li>${a}</li>`).join('')}
      </ul>
    </div>
  `;
}

/* Render fichas */
function renderFichas(uniqueNums){
  const cont = document.getElementById('fichas');
  cont.innerHTML = uniqueNums.map(n=>{
    const f = FICHAS[n] || FICHAS[reduceNumber(n,false)];
    return `
      <details>
        <summary>${f.titulo}</summary>
        <div style="margin-top:8px">
          <div><b>En luz:</b> ${f.luz}</div>
          <div style="margin-top:6px"><b>En sombra:</b> ${f.sombra}</div>
          <div style="margin-top:6px"><b>Integración práctica:</b> ${f.integracion}</div>
        </div>
      </details>
    `;
  }).join('');
}

/* Principal */
function calcular(){
  const nombre = document.getElementById('nombre').value.trim();
  const fNac = document.getElementById('nacimiento').value;
  const fAnal = document.getElementById('fechaAnalisis').value;
  if(!nombre || !fNac){
    alert('Completa nombre y fecha de nacimiento.'); return;
  }
  const dob = parseISO(fNac);
  const target = fAnal ? parseISO(fAnal) : new Date();

  const camino = calcCaminoVida(dob);
  const { destino, alma, personalidad } = nameToNumbers(nombre, document.getElementById('contarYvocal').checked);
  const anio = personalYear(dob, target);
  const mes = personalMonth(anio, target);
  const dia = personalDay(mes, target);

  // KPIs
  k1.textContent = camino; k2.textContent = destino; k3.textContent = alma;
  k4.textContent = personalidad; k5.textContent = anio; k6.textContent = mes; k7.textContent = dia;

  global.innerHTML = interpretacionGlobal({camino, destino, alma, personalidad});
  vibe.innerHTML = vibracionDelDia(dia);

  // Fichas únicas
  const set = new Set([camino,destino,alma,personalidad]);
  renderFichas([...set]);

  document.getElementById('panelResultados').style.display = '';
  document.getElementById('panelFichas').style.display = '';
}
function limpiar(){
  nombre.value=''; nacimiento.value=''; fechaAnalisis.value='';
  document.getElementById('panelResultados').style.display='none';
  document.getElementById('panelFichas').style.display='none';
}
</script>
</body>
</html>